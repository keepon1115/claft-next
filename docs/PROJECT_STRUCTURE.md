# CLAFT Next.js ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
claft-next/
â”œâ”€â”€ app/                        # Next.js 13+ App Router
â”‚   â”œâ”€â”€ admin/                  # ç®¡ç†è€…ç”»é¢
â”‚   â”œâ”€â”€ api/                    # API Routes
â”‚   â”œâ”€â”€ mirai/                  # æœªæ¥ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ profile/                # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ quest/                  # ã‚¯ã‚¨ã‚¹ãƒˆãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ unauthorized/           # æœªèªè¨¼ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ yononaka/              # ä¸–ã®ä¸­ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ globals.css            # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â”œâ”€â”€ layout.tsx             # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”œâ”€â”€ page.tsx               # ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸
â”‚   â””â”€â”€ providers.tsx          # ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼è¨­å®š
â”‚
â”œâ”€â”€ components/                 # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ admin/                  # ç®¡ç†è€…ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ ApprovalTable.tsx
â”‚   â”‚   â”œâ”€â”€ FilterSection.tsx
â”‚   â”‚   â””â”€â”€ DynamicAdminDashboard.tsx
â”‚   â”œâ”€â”€ auth/                   # èªè¨¼é–¢é€£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ AuthButton.tsx
â”‚   â”‚   â”œâ”€â”€ AuthModal.tsx
â”‚   â”‚   â””â”€â”€ DynamicAuthModal.tsx
â”‚   â”œâ”€â”€ common/                 # å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”œâ”€â”€ HamburgerMenu.tsx
â”‚   â”‚   â””â”€â”€ NotificationSystem.tsx
â”‚   â”œâ”€â”€ home/                   # ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ ProfileCard.tsx
â”‚   â”‚   â”œâ”€â”€ JibunCraft.tsx
â”‚   â”‚   â”œâ”€â”€ CraftStory.tsx
â”‚   â”‚   â””â”€â”€ DynamicProfileCard.tsx
â”‚   â””â”€â”€ quest/                  # ã‚¯ã‚¨ã‚¹ãƒˆé–¢é€£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚       â”œâ”€â”€ QuestMap.tsx
â”‚       â”œâ”€â”€ StageModal.tsx
â”‚       â”œâ”€â”€ StageNode.tsx
â”‚       â”œâ”€â”€ LoginPromptModal.tsx
â”‚       â””â”€â”€ DynamicStageModal.tsx
â”‚
â”œâ”€â”€ hooks/                      # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”œâ”€â”€ useAuth.ts             # èªè¨¼ãƒ•ãƒƒã‚¯
â”‚   â”œâ”€â”€ useMediaQuery.ts       # ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¯ã‚¨ãƒªãƒ•ãƒƒã‚¯
â”‚   â”œâ”€â”€ usePWA.ts              # PWAãƒ•ãƒƒã‚¯
â”‚   â”œâ”€â”€ useRealtimeUpdates.ts  # ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ãƒ•ãƒƒã‚¯
â”‚   â””â”€â”€ useToast.ts            # ãƒˆãƒ¼ã‚¹ãƒˆãƒ•ãƒƒã‚¯
â”‚
â”œâ”€â”€ lib/                        # ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ api/                    # APIé–¢é€£
â”‚   â”‚   â””â”€â”€ quests.ts
â”‚   â”œâ”€â”€ supabase/              # Supabaseè¨­å®š
â”‚   â”‚   â”œâ”€â”€ client.ts
â”‚   â”‚   â””â”€â”€ hooks.ts
â”‚   â””â”€â”€ utils/                 # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”‚       â”œâ”€â”€ imageUtils.ts
â”‚       â”œâ”€â”€ performance.ts
â”‚       â””â”€â”€ seo.ts
â”‚
â”œâ”€â”€ stores/                     # çŠ¶æ…‹ç®¡ç† (Zustand)
â”‚   â”œâ”€â”€ authStore.ts           # èªè¨¼ã‚¹ãƒˆã‚¢
â”‚   â”œâ”€â”€ questStore.ts          # ã‚¯ã‚¨ã‚¹ãƒˆã‚¹ãƒˆã‚¢
â”‚   â””â”€â”€ userStore.ts           # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆã‚¢
â”‚
â”œâ”€â”€ types/                      # TypeScriptå‹å®šç¾©
â”‚   â”œâ”€â”€ database.ts            # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å‹
â”‚   â”œâ”€â”€ index.ts               # å…±é€šå‹
â”‚   â”œâ”€â”€ quest.ts               # ã‚¯ã‚¨ã‚¹ãƒˆå‹
â”‚   â””â”€â”€ user.ts                # ãƒ¦ãƒ¼ã‚¶ãƒ¼å‹
â”‚
â”œâ”€â”€ docs/                       # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ examples/              # ä½¿ç”¨ä¾‹ã¨ã‚µãƒ³ãƒ—ãƒ«
â”‚   â”‚   â”œâ”€â”€ authStore.example.md
â”‚   â”‚   â”œâ”€â”€ middleware.examples.md
â”‚   â”‚   â”œâ”€â”€ providers.examples.md
â”‚   â”‚   â”œâ”€â”€ useAuth.examples.md
â”‚   â”‚   â”œâ”€â”€ useMediaQuery.examples.md
â”‚   â”‚   â”œâ”€â”€ usePWA.examples.md
â”‚   â”‚   â”œâ”€â”€ useRealtimeUpdates.examples.md
â”‚   â”‚   â”œâ”€â”€ userStore.examples.md
â”‚   â”‚   â””â”€â”€ examples.md
â”‚   â”œâ”€â”€ Development-Workflow-Guide.md
â”‚   â”œâ”€â”€ Performance-Optimization-Guide.md
â”‚   â”œâ”€â”€ PWA-Setup.md
â”‚   â””â”€â”€ SEO-Implementation-Guide.md
â”‚
â”œâ”€â”€ public/                     # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ images/                # ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ icons/                 # ã‚¢ã‚¤ã‚³ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ manifest.json          # PWAãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ
â”‚
â”œâ”€â”€ reference/                  # å‚è€ƒè³‡æ–™
â”‚   â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ html/
â”‚   â”œâ”€â”€ images/
â”‚   â””â”€â”€ javascript/
â”‚
â””â”€â”€ scripts/                    # ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
    â””â”€â”€ performance-audit.js
```

## ğŸ¯ ãƒ•ã‚©ãƒ«ãƒ€ã®å½¹å‰²

### `/app` - Next.js App Router
- **å½¹å‰²**: ãƒšãƒ¼ã‚¸ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
- **ç‰¹å¾´**: Next.js 13+ã®App Routerã‚’ä½¿ç”¨
- **å«ã¾ã‚Œã‚‹ã‚‚ã®**: ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€API Routesã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

### `/components` - UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **å½¹å‰²**: å†åˆ©ç”¨å¯èƒ½ãªReactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **æ§‹æˆ**: æ©Ÿèƒ½åˆ¥ã«ãƒ•ã‚©ãƒ«ãƒ€åˆ†ã‘
- **ç‰¹å¾´**: å˜ä¸€è²¬ä»»ã®åŸå‰‡ã«å¾“ã£ãŸè¨­è¨ˆ

### `/hooks` - ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
- **å½¹å‰²**: ãƒ­ã‚¸ãƒƒã‚¯ã®å†åˆ©ç”¨ã¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åˆ†é›¢
- **ç‰¹å¾´**: React Hooksãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¾“ã£ãŸå®Ÿè£…

### `/lib` - ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
- **å½¹å‰²**: å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è¨­å®šã¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
- **å«ã¾ã‚Œã‚‹ã‚‚ã®**: Supabaseè¨­å®šã€APIé–¢æ•°ã€å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

### `/stores` - çŠ¶æ…‹ç®¡ç†
- **å½¹å‰²**: ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ã®ç®¡ç†
- **æŠ€è¡“**: Zustand + Immer + Persist
- **ç‰¹å¾´**: TypeScriptå®Œå…¨å¯¾å¿œ

### `/types` - å‹å®šç¾©
- **å½¹å‰²**: TypeScriptå‹å®šç¾©ã®é›†ç´„
- **ç‰¹å¾´**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã¨é€£å‹•

### `/docs` - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- **å½¹å‰²**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ä½¿ç”¨ä¾‹
- **æ§‹æˆ**: ã‚¬ã‚¤ãƒ‰ + ä¾‹æ–‡é›†

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Next.js 14 (App Router)
- **è¨€èª**: TypeScript
- **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**: Tailwind CSS
- **çŠ¶æ…‹ç®¡ç†**: Zustand
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Supabase
- **èªè¨¼**: Supabase Auth
- **PWA**: next-pwa
- **ã‚¢ã‚¤ã‚³ãƒ³**: Lucide React

## ğŸ“‹ ãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦å‰‡

- **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: PascalCase (ä¾‹: `AuthButton.tsx`)
- **ãƒ•ãƒƒã‚¯**: camelCase with `use` prefix (ä¾‹: `useAuth.ts`)
- **ã‚¹ãƒˆã‚¢**: camelCase with `Store` suffix (ä¾‹: `authStore.ts`)
- **å‹å®šç¾©**: camelCase (ä¾‹: `database.ts`)
- **ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£**: camelCase (ä¾‹: `imageUtils.ts`)

## ğŸ§¹ æ•´ç†ã®ãƒã‚¤ãƒ³ãƒˆ

1. **æ©Ÿèƒ½åˆ¥åˆ†é›¢**: é–¢é€£ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åŒã˜ãƒ•ã‚©ãƒ«ãƒ€ã«é…ç½®
2. **ä¾‹æ–‡ã®é›†ç´„**: å…¨ã¦ã®`.examples.md`ã‚’`docs/examples/`ã«ç§»å‹•
3. **ä¸è¦ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤**: `.gitkeep`ã‚„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤
4. **Dynamic Importæœ€é©åŒ–**: é©åˆ‡ãªãƒ•ã‚©ãƒ«ãƒ€ã«åˆ†æ•£é…ç½®
5. **å‹å®‰å…¨æ€§**: TypeScriptã®æ©æµã‚’æœ€å¤§åŒ–

## ğŸ”„ ä»Šå¾Œã®æ‹¡å¼µ

æ–°æ©Ÿèƒ½è¿½åŠ æ™‚ã¯ä»¥ä¸‹ã®æ§‹æˆã«å¾“ã£ã¦ãã ã•ã„ï¼š

1. **æ–°ãƒšãƒ¼ã‚¸**: `/app/[feature]/page.tsx`
2. **æ–°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: `/components/[feature]/`
3. **æ–°ãƒ•ãƒƒã‚¯**: `/hooks/use[Feature].ts`
4. **æ–°ã‚¹ãƒˆã‚¢**: `/stores/[feature]Store.ts`
5. **æ–°å‹å®šç¾©**: `/types/[feature].ts` 